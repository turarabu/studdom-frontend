{"remainingRequest":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Reports\\DownloadReport.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Reports\\DownloadReport.vue","mtime":1577199531922},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQnV0dG9uIGZyb20gJzpzcmMvY29tcG9uZW50cy9VSS9CdXR0b24udnVlJw0KaW1wb3J0IE9wdGlvbnNMaXN0IGZyb20gJzpzcmMvY29tcG9uZW50cy9VSS9PcHRpb25zTGlzdC52dWUnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBjb21wb25lbnRzOiB7IEJ1dHRvbiB9LA0KICAgIG1ldGhvZHM6IHsgZG93bmxvYWQsIGdldERhdGUsIGdldFR5cGUsIGdldFBlcmlvZCB9LA0KICAgIG1vdW50ZWQ6IHN0YXJ0LA0KICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGFjdGl2ZTogMCwNCiAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSwNCiAgICAgICAgICAgIHJlY29yZHM6IFtdDQogICAgICAgIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGRvd25sb2FkICgpIHsNCiAgICB3aW5kb3cub3BlbignaHR0cDovL2xvY2FsaG9zdDo4MDAwL3JlY29yZC9kb3dubG9hZD9pZD0nICsgdGhpcy5zZWxlY3RlZCwgJ19ibGFuaycpDQp9DQoNCmZ1bmN0aW9uIGdldERhdGUgKGRhdGUpIHsNCiAgICByZXR1cm4gbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVTdHJpbmcoJ3J1Jywgew0KICAgICAgICB5ZWFyOiAnbnVtZXJpYycsDQogICAgICAgIG1vbnRoOiAnbG9uZycsDQogICAgICAgIGRheTogJ251bWVyaWMnLA0KICAgICAgICBob3VyOiAnbnVtZXJpYycsDQogICAgICAgIG1pbnV0ZTogJ251bWVyaWMnDQogICAgfSkNCn0NCg0KZnVuY3Rpb24gZ2V0VHlwZSAodHlwZSkgew0KICAgIHZhciB0eXBlcyA9IHsNCiAgICAgICAgJ3NpZ24taW4nOiAn0KHRgtCw0YLQuNGB0YLQuNC60LAg0L/QviDQsNCy0YLQvtGA0LjQt9Cw0YbQuNGP0LwnLA0KICAgICAgICAnc2lnbi11cCc6ICfQodGC0LDRgtC40YHRgtC40LrQsCDQv9C+INGA0LXQs9C40YHRgtGA0LDRhtC40Y/QvCcsDQogICAgICAgICdjb25zb2xpZGF0ZSc6ICfQodCy0L7QtNC90YvQuSDQvtGC0YfQtdGCINC/0L4g0L7QsdGJ0LXQttC40YLQuNGP0LwnLA0KICAgICAgICAndHVybnN0aWxlcyc6ICfQntGC0YfQtdGCINC/0L4g0YLQtdGA0LzQuNC90LDQu9Cw0LwnDQogICAgfQ0KDQogICAgcmV0dXJuIHR5cGVzW3R5cGVdDQp9DQoNCmZ1bmN0aW9uIGdldFBlcmlvZCAoZnJvbSkgew0KICAgIHJldHVybiBuZXcgRGF0ZShmcm9tKS50b0xvY2FsZVN0cmluZygncnUnLCB7DQogICAgICAgIHllYXI6ICdudW1lcmljJywNCiAgICAgICAgbW9udGg6ICdsb25nJywNCiAgICAgICAgZGF5OiAnbnVtZXJpYycNCiAgICB9KQ0KfQ0KDQphc3luYyBmdW5jdGlvbiBzdGFydCAoKSB7DQogICAgbGV0IHsgZGF0YSB9ID0gYXdhaXQgdGhpcy5hcGkuZ2V0KCdyZWNvcmQvbGlzdCcpDQogICAgdGhpcy5yZWNvcmRzID0gZGF0YQ0KfQ0KDQo="},{"version":3,"sources":["DownloadReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"DownloadReport.vue","sourceRoot":"source/components/Reports","sourcesContent":["<template lang='pug'>\r\n\r\n    div( class='download-report' )\r\n        p( class='bold-text' ) Пероид отчётности\r\n        div( class='period-div' )\r\n            input( class='datepicker' type='date' placeholder='С' )\r\n            input( class='datepicker' type='date' placeholder='По' )\r\n\r\n        table( class='records-table' )\r\n            thead( class='head' )\r\n                tr( class='row' )\r\n                    th( class='data' ) Номер отчёта\r\n                    th( class='data' ) Пользователь\r\n                    th( class='data' ) Дата\r\n                    th( class='data' ) Вид отчёта\r\n                    th( class='data' ) Субъект отчёта\r\n                    th( class='data' ) Периоды\r\n\r\n            tbody( class='body' )\r\n                tr( v-for='(record, index) in records' class='row' :class='{ active: selected === record.id }' :key='record._id' @click='selected = record.id' )\r\n                    td( class='data' ) {{ index+1 }}\r\n                    td( class='data' ) {{ record.userName }}\r\n                    td( class='data' ) {{ getDate(record.date) }}\r\n                    td( class='data' ) {{ getType(record.recordType) }}\r\n                    td( class='data' ) {{ record.dormitory }}\r\n                    td( class='data' ) С {{ getPeriod(record.from) }}\r\n                        br\r\n                        span По {{ getPeriod(record.to) }}\r\n\r\n        Button( v-if='selected !== false' icon='upload' title='Скачать формате PDF' background='green' icon-top='3px' @click.native='download' )\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport Button from ':src/components/UI/Button.vue'\r\nimport OptionsList from ':src/components/UI/OptionsList.vue'\r\n\r\nexport default {\r\n    components: { Button },\r\n    methods: { download, getDate, getType, getPeriod },\r\n    mounted: start,\r\n    data: function () {\r\n        return {\r\n            active: 0,\r\n            selected: false,\r\n            records: []\r\n        }\r\n    }\r\n}\r\n\r\nfunction download () {\r\n    window.open('http://localhost:8000/record/download?id=' + this.selected, '_blank')\r\n}\r\n\r\nfunction getDate (date) {\r\n    return new Date(date).toLocaleString('ru', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n    })\r\n}\r\n\r\nfunction getType (type) {\r\n    var types = {\r\n        'sign-in': 'Статистика по авторизациям',\r\n        'sign-up': 'Статистика по регистрациям',\r\n        'consolidate': 'Сводный отчет по общежитиям',\r\n        'turnstiles': 'Отчет по терминалам'\r\n    }\r\n\r\n    return types[type]\r\n}\r\n\r\nfunction getPeriod (from) {\r\n    return new Date(from).toLocaleString('ru', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n    })\r\n}\r\n\r\nasync function start () {\r\n    let { data } = await this.api.get('record/list')\r\n    this.records = data\r\n}\r\n\r\n</script>\r\n\r\n<style lang='stylus'>\r\n@import '~src/style/palette'\r\n\r\n.download-report\r\n\r\n    .bold-text\r\n        font-size 18px\r\n        font-weight 500\r\n        margin 4px 0\r\n\r\n    .datepicker\r\n        border 1px solid $light-gray\r\n        border-radius 3px\r\n        font-size 18px\r\n        padding 6px 12px\r\n        margin-right 8px\r\n\r\n    .records-table\r\n        border 1px solid $light-gray\r\n        border-radius 5px\r\n        border-collapse collapse\r\n        margin 24px 0\r\n        width 100%\r\n\r\n        .head .data\r\n            border-bottom 1px solid $light-gray\r\n            font-weight 500\r\n            padding 12px\r\n\r\n        .data\r\n            font-size 18px\r\n            padding 8px 12px\r\n            text-align left\r\n            &:last-child\r\n                text-align right\r\n\r\n        .body .row\r\n            cursor pointer\r\n            &:hover\r\n                background lighten($light-gray, 25)\r\n            &.active\r\n                background lighten($light-gray, 20)\r\n\r\n</style>"]}]}