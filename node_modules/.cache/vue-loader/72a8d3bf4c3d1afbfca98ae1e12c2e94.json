{"remainingRequest":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Reports\\CreateReport.vue?vue&type=style&index=0&lang=stylus&","dependencies":[{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Reports\\CreateReport.vue","mtime":1577186278826},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCkBpbXBvcnQgJ35zcmMvc3R5bGUvcGFsZXR0ZScNCg0KLmNyZWF0ZS1yZXBvcnQNCg0KICAgIC5ib2xkLXRleHQNCiAgICAgICAgZm9udC1zaXplIDE4cHgNCiAgICAgICAgZm9udC13ZWlnaHQgNTAwDQogICAgICAgIG1hcmdpbiA0cHggMA0KDQogICAgLmRhdGVwaWNrZXItcGxhY2Vob2xkZXINCiAgICAgICAgZGlzcGxheSBpbmxpbmUtYmxvY2sNCiAgICAgICAgbWFyZ2luLXJpZ2h0IDhweA0KDQogICAgLnJlY29yZC1kYXRlcGlja2VyDQogICAgICAgIGJvcmRlciAxcHggc29saWQgJGxpZ2h0LWdyYXkNCiAgICAgICAgYm9yZGVyLXJhZGl1cyAzcHgNCiAgICAgICAgZm9udC1zaXplIDE4cHgNCiAgICAgICAgcGFkZGluZyA2cHggMTJweA0KICAgICAgICBtYXJnaW4tcmlnaHQgMTJweA0KDQogICAgLmJsb2Nrcy1kaXYNCiAgICAgICAgYWxpZ24taXRlbXMgZmxleC1zdGFydA0KICAgICAgICBkaXNwbGF5IGZsZXgNCiAgICAgICAganVzdGlmeS1jb250ZW50IHNwYWNlLWJldHdlZW4NCiAgICAgICAgbWFyZ2luIDI0cHggMA0KDQogICAgICAgIC5ibG9jaw0KICAgICAgICAgICAgd2lkdGggY2FsYyg1MCUgLSAxMHB4KQ0KDQogICAgICAgIC5vcHRpb25zLWRpdg0KICAgICAgICAgICAgYm9yZGVyIDFweCBzb2xpZCAkbGlnaHQtZ3JheQ0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1cyA1cHgNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b20gMTJweA0KICAgICAgICAgICAgcGFkZGluZyAxNnB4DQoNCiAgICAgICAgLmJvbGQtdGV4dC1kaXYNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zIGZsZXgtZW5kDQogICAgICAgICAgICBkaXNwbGF5IGZsZXgNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudCBzcGFjZS1iZXR3ZWVuDQogICAgICAgICAgICBoZWlnaHQgNDBweA0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbSA4cHgNCg0KICAgICAgICAuc2VhcmNoDQogICAgICAgICAgICBib3JkZXIgMXB4IHNvbGlkIGxpZ2h0ZW4oJGxpZ2h0LWdyYXksIDEwKQ0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1cyAzcHgNCiAgICAgICAgICAgIGZvbnQtc2l6ZSAxOHB4DQogICAgICAgICAgICBvdXRsaW5lIG5vbmUNCiAgICAgICAgICAgIHBhZGRpbmcgOHB4IDEycHgNCiAgICAgICAgICAgIHdpZHRoIDMyMHB4DQogICAgICAgICAgICAmOmZvY3VzDQogICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yIGRhcmtlbigkbGlnaHQtZ3JheSwgMTApDQoNCiAgICAgICAgLm5vdC1mb3VuZA0KICAgICAgICAgICAgY29sb3IgZGFya2VuKCRsaWdodC1ncmF5LCAyMCkNCg0K"},{"version":3,"sources":["CreateReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"CreateReport.vue","sourceRoot":"source/components/Reports","sourcesContent":["<template lang='pug'>\r\n    div( class='create-report' )\r\n        p( class='bold-text' ) Пероид отчётности\r\n        div( class='period-div' )\r\n            span( class='datepicker-placeholder' ) С\r\n            input( class='record-datepicker' type='date' placeholder='С' v-model='from' )\r\n\r\n            span( class='datepicker-placeholder' ) По\r\n            input( class='record-datepicker' type='date' placeholder='По' v-model='to' )\r\n\r\n        div( class='blocks-div' )\r\n            div( class='block' )\r\n                div( class='bold-text-div' )\r\n                    p( class='bold-text' ) Вид отчётности\r\n                div( class='options-div' )\r\n                    OptionsList( :list='reportTypes' name='reportType' v-model='selected.report' )\r\n\r\n                Button( icon='upload' title='Выгрузить в формате PDF' background='green' icon-top='3px' @click.native='download' )\r\n\r\n\r\n            div( class='block' )\r\n                div( class='bold-text-div' )\r\n                    p( class='bold-text' ) Субъекты отчётности\r\n                    input( class='search' placeholder='Поиск субъекта...' v-model='search' )\r\n\r\n                div( class='options-div' )\r\n                    OptionsList( v-if='theLength > 0' :list='sortedDormitories' name='dormitory' v-model='selected.dormitory' )\r\n                    span( v-else class='not-found' ) Не найдено\r\n\r\n</template>\r\n\r\n<script>\r\nimport Button from ':src/components/UI/Button.vue'\r\nimport OptionsList from ':src/components/UI/OptionsList.vue'\r\n\r\nexport default {\r\n    components: { Button, OptionsList },\r\n    computed: { dormitories, sortedDormitories, theLength },\r\n    methods: { download },\r\n    mounted: start,\r\n    data: function () {\r\n        var date = new Date()\r\n\r\n        return {\r\n            from: `${ date.getFullYear() }-${ date.getMonth() + 1 }-${ date.getDate() - 5 }`,\r\n            to: `${ date.getFullYear() }-${ date.getMonth() + 1 }-${ date.getDate() }`,\r\n            search: '',\r\n            selected: {\r\n                report: 'sign-in',\r\n                dormitory: 'all'\r\n            },\r\n\r\n            reportTypes: {\r\n                'sign-in': 'Статистика по авторизациям',\r\n                'sign-up': 'Статистика по регистрациям',\r\n                'conc': 'Свободный отчет по общежитиям',\r\n                'turnstiles': 'Отчет по терминалам',\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction dormitories () {\r\n    return this.$store.state.dormitories.list\r\n}\r\n\r\nfunction theLength () {\r\n    return this.sortedDormitories && Object.keys(this.sortedDormitories).length\r\n}\r\n\r\nfunction sortedDormitories () {\r\n    var list = {\r\n        all: 'Все общежития'\r\n    }\r\n\r\n    if ( this.$store.state.dormitories.list ) {\r\n        this.dormitories.forEach(dormitory => {\r\n            if ( dormitory.name.toLowerCase().search( (this.search || '').toLowerCase() ) > -1 )\r\n                list[dormitory.code] = dormitory.name\r\n        })\r\n\r\n        if ( this.search.length > 0 )\r\n            delete list.all\r\n    }\r\n\r\n    return list\r\n}\r\n\r\nfunction download () {\r\n    var range = `from=${ this.from }&to=${ this.to }`\r\n    var types = `type=${ this.selected.report }&dormitory=${ this.selected.dormitory }`\r\n\r\n\r\n    window.open(`http://localhost:8000/record/pdf?${ range }&${ types }`, '_blank')\r\n}\r\n\r\nfunction start () {\r\n    this.$watch('search', () => {\r\n        this.selected.dormitory = 0\r\n    })\r\n\r\n    this.$watch('from', value => {\r\n        console.log(value)\r\n    })\r\n}\r\n</script>\r\n\r\n<style lang='stylus'>\r\n@import '~src/style/palette'\r\n\r\n.create-report\r\n\r\n    .bold-text\r\n        font-size 18px\r\n        font-weight 500\r\n        margin 4px 0\r\n\r\n    .datepicker-placeholder\r\n        display inline-block\r\n        margin-right 8px\r\n\r\n    .record-datepicker\r\n        border 1px solid $light-gray\r\n        border-radius 3px\r\n        font-size 18px\r\n        padding 6px 12px\r\n        margin-right 12px\r\n\r\n    .blocks-div\r\n        align-items flex-start\r\n        display flex\r\n        justify-content space-between\r\n        margin 24px 0\r\n\r\n        .block\r\n            width calc(50% - 10px)\r\n\r\n        .options-div\r\n            border 1px solid $light-gray\r\n            border-radius 5px\r\n            margin-bottom 12px\r\n            padding 16px\r\n\r\n        .bold-text-div\r\n            align-items flex-end\r\n            display flex\r\n            justify-content space-between\r\n            height 40px\r\n            margin-bottom 8px\r\n\r\n        .search\r\n            border 1px solid lighten($light-gray, 10)\r\n            border-radius 3px\r\n            font-size 18px\r\n            outline none\r\n            padding 8px 12px\r\n            width 320px\r\n            &:focus\r\n                border-color darken($light-gray, 10)\r\n\r\n        .not-found\r\n            color darken($light-gray, 20)\r\n\r\n</style>"]}]}