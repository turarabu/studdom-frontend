{"remainingRequest":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Activity\\Daily.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Activity\\Daily.vue","mtime":1577417133904},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBsb2NhbGUgPSBbJ3J1Jywgew0KICAgIG1vbnRoOiAnc2hvcnQnLA0KICAgIGRheTogJ251bWVyaWMnDQp9XQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6IFsnZGF0YScsICdwZXJpb2QnXSwNCiAgICBtZXRob2RzOiB7IHVwZGF0ZSwgZ2V0U2lnbklucywgZ2V0U2lnblVwcyB9LA0KICAgIG1vdW50ZWQ6IHN0YXJ0LA0KICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGRheXM6IFtdDQogICAgICAgIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGdldERheXMgKHBlcmlvZCkgew0KICAgIHZhciBsaXN0ID0gW10NCiAgICB2YXIgYmVnaW4gPSBuZXcgRGF0ZShwZXJpb2RbMF0pDQogICAgdmFyIGVuZCA9IG5ldyBEYXRlKHBlcmlvZFsxXSkNCiAgICB2YXIgd2l0aE1vbnRoID0gYmVnaW4uZ2V0TW9udGgoKSAhPSBlbmQuZ2V0TW9udGgoKQ0KICAgIHZhciByYW5nZSA9IDB8KGVuZC1iZWdpbikvMTAwMC82MC82MC8yNA0KDQogICAgZm9yICggbGV0IGkgPSAwOyBpIDw9IHJhbmdlOyArK2kgKSB7DQogICAgICAgIGlmICggd2l0aE1vbnRoID09PSBmYWxzZSApDQogICAgICAgICAgICBsaXN0LnB1c2goIG5ldyBEYXRlKGJlZ2luIC0gMCArIDEwMDAqNjAqNjAqMjQqaSkuZ2V0RGF0ZSgpICkNCiAgICAgICAgZWxzZSBsaXN0LnB1c2goIG5ldyBEYXRlKGJlZ2luIC0gMCArIDEwMDAqNjAqNjAqMjQqaSkudG9Mb2NhbGVEYXRlU3RyaW5nKC4uLmxvY2FsZSkgKQ0KICAgIH0NCiAgICANCiAgICAvLyBsaXN0LnNvcnQoKGEsIGIpID0+IGEgLSBiKQ0KICAgIHJldHVybiBsaXN0DQp9DQoNCmZ1bmN0aW9uIHVwZGF0ZSAoKSB7DQogICAgSGlnaGNoYXJ0cy5jaGFydCgnYWN0aXZpdHktMycsIHsNCiAgICAgICAgY2hhcnQ6IHsgdHlwZTogJ2FyZWFzcGxpbmUnIH0sDQogICAgICAgIHRpdGxlOiB7IHRleHQ6ICcnIH0sDQogICAgICAgIGNvbG9yczogWycjN2NiNWVjJywgJyNmN2EzNWMnLCAnIzkwZWQ3ZCcsICcjODA4NWU5JywgJyNmNDQyMzYnXSwNCiAgICAgICAgZXhwb3J0aW5nOiB7IGJ1dHRvbnM6IHsgY29udGV4dEJ1dHRvbjogeyBlbmFibGVkOiBmYWxzZSB9IH0gfSwNCiAgICAgICAgbGVnZW5kOiB7DQogICAgICAgICAgICBsYXlvdXQ6ICd2ZXJ0aWNhbCcsDQogICAgICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ3RvcCcsDQogICAgICAgICAgICB4OiA2MCwNCiAgICAgICAgICAgIHk6IDUwLA0KICAgICAgICAgICAgZmxvYXRpbmc6IHRydWUsDQogICAgICAgICAgICBib3JkZXJXaWR0aDogMSwNCiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjoNCiAgICAgICAgICAgICAgICBIaWdoY2hhcnRzLmRlZmF1bHRPcHRpb25zLmxlZ2VuZC5iYWNrZ3JvdW5kQ29sb3IgfHwgJyNGRkZGRkYnDQogICAgICAgIH0sDQogICAgICAgIHhBeGlzOiB7DQogICAgICAgICAgICBjYXRlZ29yaWVzOiB0aGlzLmRheXMgLy8gRGF5cw0KICAgICAgICB9LA0KICAgICAgICB5QXhpczogeyB0aXRsZTogeyB0ZXh0OiAnJyB9IH0sDQogICAgICAgIHRvb2x0aXA6IHsNCiAgICAgICAgICAgIHNoYXJlZDogdHJ1ZQ0KICAgICAgICB9LA0KICAgICAgICBjcmVkaXRzOiB7DQogICAgICAgICAgICBlbmFibGVkOiBmYWxzZQ0KICAgICAgICB9LA0KICAgICAgICBwbG90T3B0aW9uczogew0KICAgICAgICAgICAgYXJlYXNwbGluZTogew0KICAgICAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjUNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgc2VyaWVzOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgbmFtZTogJ9CQ0LLRgtC+0YDQuNC30LDRhtC40LgnLA0KICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZ2V0U2lnbklucygpDQogICAgICAgICAgICB9LA0KDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgbmFtZTogJ9Cg0LXQs9C40YHRgtGA0LDRhtC40LgnLA0KICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZ2V0U2lnblVwcygpDQogICAgICAgICAgICB9LA0KICAgICAgICBdDQogICAgfSkNCn0NCg0KZnVuY3Rpb24gZ2V0U2lnbklucyAoKSB7DQogICAgdmFyIGxpc3QgPSBbXQ0KDQogICAgdGhpcy5kYXlzLmZvckVhY2goZGF0ZSA9PiB7DQogICAgICAgIGxldCBwdXNoID0gMA0KDQogICAgICAgIHRoaXMuZGF0YS5zaWduSW5zLmZvckVhY2goc2lnbiA9PiB7DQoNCiAgICAgICAgICAgIGlmICggdHlwZW9mIGRhdGUgPT09ICdudW1iZXInICkgew0KICAgICAgICAgICAgICAgIGlmICggbmV3IERhdGUoc2lnbi5kYXRlKS5nZXREYXRlKCkgPT09IGRhdGUgKQ0KICAgICAgICAgICAgICAgICAgICArK3B1c2gNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKCBuZXcgRGF0ZShzaWduLmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZyguLi5sb2NhbGUpID09PSBkYXRlICkNCiAgICAgICAgICAgICAgICAgICAgKytwdXNoDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgfSkNCg0KICAgICAgICBsaXN0LnB1c2gocHVzaCkNCiAgICB9KQ0KDQogICAgcmV0dXJuIGxpc3QNCn0NCg0KZnVuY3Rpb24gZ2V0U2lnblVwcyAoKSB7DQogICAgdmFyIGxpc3QgPSBbXQ0KDQogICAgdGhpcy5kYXlzLmZvckVhY2goZGF0ZSA9PiB7DQogICAgICAgIGxldCBwdXNoID0gMA0KDQogICAgICAgIHRoaXMuZGF0YS5zaWduVXBzLmZvckVhY2goc2lnbiA9PiB7DQogICAgICAgICAgICBpZiAoIHR5cGVvZiBkYXRlID09PSAnbnVtYmVyJyApIHsNCiAgICAgICAgICAgICAgICBpZiAoIG5ldyBEYXRlKHNpZ24uc2lnblVwKS5nZXREYXRlKCkgPT09IGRhdGUgKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgKytwdXNoDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoIG5ldyBEYXRlKHNpZ24uc2lnblVwKS50b0xvY2FsZURhdGVTdHJpbmcoLi4ubG9jYWxlKSA9PT0gZGF0ZSApDQogICAgICAgICAgICAgICAgICAgICsrcHVzaA0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KDQogICAgICAgIGxpc3QucHVzaChwdXNoKQ0KICAgIH0pDQoNCiAgICByZXR1cm4gbGlzdA0KfQ0KDQpmdW5jdGlvbiBzdGFydCAoKSB7DQogICAgdGhpcy4kd2F0Y2goJ2RhdGEnLCAodmFsdWUpID0+IHsNCiAgICAgICAgdGhpcy5kYXlzID0gZ2V0RGF5cyh0aGlzLnBlcmlvZCkNCiAgICAgICAgdGhpcy51cGRhdGUoKQ0KICAgIH0pDQp9DQo="},{"version":3,"sources":["Daily.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Daily.vue","sourceRoot":"source/components/Activity","sourcesContent":["<template lang='pug'>\r\n\r\n    figure( class='highcharts-figure' )\r\n        div#activity-3\r\n\r\n</template>\r\n\r\n<script>\r\nconst locale = ['ru', {\r\n    month: 'short',\r\n    day: 'numeric'\r\n}]\r\n\r\nexport default {\r\n    props: ['data', 'period'],\r\n    methods: { update, getSignIns, getSignUps },\r\n    mounted: start,\r\n    data: function () {\r\n        return {\r\n            days: []\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDays (period) {\r\n    var list = []\r\n    var begin = new Date(period[0])\r\n    var end = new Date(period[1])\r\n    var withMonth = begin.getMonth() != end.getMonth()\r\n    var range = 0|(end-begin)/1000/60/60/24\r\n\r\n    for ( let i = 0; i <= range; ++i ) {\r\n        if ( withMonth === false )\r\n            list.push( new Date(begin - 0 + 1000*60*60*24*i).getDate() )\r\n        else list.push( new Date(begin - 0 + 1000*60*60*24*i).toLocaleDateString(...locale) )\r\n    }\r\n    \r\n    // list.sort((a, b) => a - b)\r\n    return list\r\n}\r\n\r\nfunction update () {\r\n    Highcharts.chart('activity-3', {\r\n        chart: { type: 'areaspline' },\r\n        title: { text: '' },\r\n        colors: ['#7cb5ec', '#f7a35c', '#90ed7d', '#8085e9', '#f44236'],\r\n        exporting: { buttons: { contextButton: { enabled: false } } },\r\n        legend: {\r\n            layout: 'vertical',\r\n            align: 'left',\r\n            verticalAlign: 'top',\r\n            x: 60,\r\n            y: 50,\r\n            floating: true,\r\n            borderWidth: 1,\r\n            backgroundColor:\r\n                Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF'\r\n        },\r\n        xAxis: {\r\n            categories: this.days // Days\r\n        },\r\n        yAxis: { title: { text: '' } },\r\n        tooltip: {\r\n            shared: true\r\n        },\r\n        credits: {\r\n            enabled: false\r\n        },\r\n        plotOptions: {\r\n            areaspline: {\r\n                fillOpacity: 0.5\r\n            }\r\n        },\r\n        series: [\r\n            {\r\n                name: 'Авторизации',\r\n                data: this.getSignIns()\r\n            },\r\n\r\n            {\r\n                name: 'Регистрации',\r\n                data: this.getSignUps()\r\n            },\r\n        ]\r\n    })\r\n}\r\n\r\nfunction getSignIns () {\r\n    var list = []\r\n\r\n    this.days.forEach(date => {\r\n        let push = 0\r\n\r\n        this.data.signIns.forEach(sign => {\r\n\r\n            if ( typeof date === 'number' ) {\r\n                if ( new Date(sign.date).getDate() === date )\r\n                    ++push\r\n            }\r\n\r\n            else {\r\n                if ( new Date(sign.date).toLocaleDateString(...locale) === date )\r\n                    ++push\r\n            }\r\n            \r\n        })\r\n\r\n        list.push(push)\r\n    })\r\n\r\n    return list\r\n}\r\n\r\nfunction getSignUps () {\r\n    var list = []\r\n\r\n    this.days.forEach(date => {\r\n        let push = 0\r\n\r\n        this.data.signUps.forEach(sign => {\r\n            if ( typeof date === 'number' ) {\r\n                if ( new Date(sign.signUp).getDate() === date ) {\r\n\r\n                    ++push\r\n                }\r\n            }\r\n\r\n            else {\r\n                if ( new Date(sign.signUp).toLocaleDateString(...locale) === date )\r\n                    ++push\r\n            }\r\n        })\r\n\r\n        list.push(push)\r\n    })\r\n\r\n    return list\r\n}\r\n\r\nfunction start () {\r\n    this.$watch('data', (value) => {\r\n        this.days = getDays(this.period)\r\n        this.update()\r\n    })\r\n}\r\n</script>"]}]}