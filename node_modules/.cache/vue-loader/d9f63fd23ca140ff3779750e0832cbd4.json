{"remainingRequest":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Activity\\Daily.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Activity\\Daily.vue","mtime":1577240363838},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQpjb25zdCBsb2NhbGUgPSBbJ3J1Jywgew0KICAgIG1vbnRoOiAnc2hvcnQnLA0KICAgIGRheTogJ251bWVyaWMnDQp9XQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgcHJvcHM6IFsnZGF0YScsICdwZXJpb2QnXSwNCiAgICBtZXRob2RzOiB7IHVwZGF0ZSwgZ2V0U2lnbklucywgZ2V0U2lnblVwcyB9LA0KICAgIG1vdW50ZWQ6IHN0YXJ0LA0KICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGRheXM6IFtdDQogICAgICAgIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGdldERheXMgKHBlcmlvZCkgew0KICAgIHZhciBsaXN0ID0gW10NCiAgICB2YXIgYmVnaW4gPSBuZXcgRGF0ZShwZXJpb2RbMF0pDQogICAgdmFyIGVuZCA9IG5ldyBEYXRlKHBlcmlvZFsxXSkNCiAgICB2YXIgd2l0aE1vbnRoID0gYmVnaW4uZ2V0TW9udGgoKSAhPSBlbmQuZ2V0TW9udGgoKQ0KICAgIHZhciByYW5nZSA9IDB8KGVuZC1iZWdpbikvMTAwMC82MC82MC8yNA0KDQogICAgZm9yICggbGV0IGkgPSAwOyBpIDw9IHJhbmdlOyArK2kgKSB7DQogICAgICAgIGlmICggd2l0aE1vbnRoID09PSBmYWxzZSApDQogICAgICAgICAgICBsaXN0LnB1c2goIG5ldyBEYXRlKGJlZ2luIC0gMCArIDEwMDAqNjAqNjAqMjQqaSkuZ2V0RGF0ZSgpICkNCiAgICAgICAgZWxzZSBsaXN0LnB1c2goIG5ldyBEYXRlKGJlZ2luIC0gMCArIDEwMDAqNjAqNjAqMjQqaSkudG9Mb2NhbGVEYXRlU3RyaW5nKC4uLmxvY2FsZSkgKQ0KICAgIH0NCiAgICANCiAgICAvLyBsaXN0LnNvcnQoKGEsIGIpID0+IGEgLSBiKQ0KICAgIHJldHVybiBsaXN0DQp9DQoNCmZ1bmN0aW9uIHVwZGF0ZSAoKSB7DQogICAgSGlnaGNoYXJ0cy5jaGFydCgnYWN0aXZpdHktMycsIHsNCiAgICAgICAgY2hhcnQ6IHsgdHlwZTogJ2FyZWFzcGxpbmUnIH0sDQogICAgICAgIHRpdGxlOiB7IHRleHQ6ICcnIH0sDQogICAgICAgIGV4cG9ydGluZzogeyBidXR0b25zOiB7IGNvbnRleHRCdXR0b246IHsgZW5hYmxlZDogZmFsc2UgfSB9IH0sDQogICAgICAgIGxlZ2VuZDogew0KICAgICAgICAgICAgbGF5b3V0OiAndmVydGljYWwnLA0KICAgICAgICAgICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246ICd0b3AnLA0KICAgICAgICAgICAgeDogNjAsDQogICAgICAgICAgICB5OiA1MCwNCiAgICAgICAgICAgIGZsb2F0aW5nOiB0cnVlLA0KICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDEsDQogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6DQogICAgICAgICAgICAgICAgSGlnaGNoYXJ0cy5kZWZhdWx0T3B0aW9ucy5sZWdlbmQuYmFja2dyb3VuZENvbG9yIHx8ICcjRkZGRkZGJw0KICAgICAgICB9LA0KICAgICAgICB4QXhpczogew0KICAgICAgICAgICAgY2F0ZWdvcmllczogdGhpcy5kYXlzIC8vIERheXMNCiAgICAgICAgfSwNCiAgICAgICAgeUF4aXM6IHsgdGl0bGU6IHsgdGV4dDogJycgfSB9LA0KICAgICAgICB0b29sdGlwOiB7DQogICAgICAgICAgICBzaGFyZWQ6IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgY3JlZGl0czogew0KICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UNCiAgICAgICAgfSwNCiAgICAgICAgcGxvdE9wdGlvbnM6IHsNCiAgICAgICAgICAgIGFyZWFzcGxpbmU6IHsNCiAgICAgICAgICAgICAgICBmaWxsT3BhY2l0eTogMC41DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIHNlcmllczogWw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG5hbWU6ICfQkNCy0YLQvtGA0LjQt9Cw0YbQuNC4JywNCiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdldFNpZ25JbnMoKQ0KICAgICAgICAgICAgfSwNCg0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG5hbWU6ICfQoNC10LPQuNGB0YLRgNCw0YbQuNC4JywNCiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLmdldFNpZ25VcHMoKQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgXQ0KICAgIH0pDQp9DQoNCmZ1bmN0aW9uIGdldFNpZ25JbnMgKCkgew0KICAgIHZhciBsaXN0ID0gW10NCiAgICBjb25zb2xlLmxvZyh0aGlzLmRheXMpDQoNCiAgICB0aGlzLmRheXMuZm9yRWFjaChkYXRlID0+IHsNCiAgICAgICAgbGV0IHB1c2ggPSAwDQoNCiAgICAgICAgdGhpcy5kYXRhLnNpZ25JbnMuZm9yRWFjaChzaWduID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGUsIG5ldyBEYXRlKHNpZ24uZGF0ZSkuZ2V0RGF0ZSgpKQ0KDQogICAgICAgICAgICBpZiAoIHR5cGVvZiBkYXRlID09PSAnbnVtYmVyJyApIHsNCiAgICAgICAgICAgICAgICBpZiAoIG5ldyBEYXRlKHNpZ24uZGF0ZSkuZ2V0RGF0ZSgpID09PSBkYXRlICkNCiAgICAgICAgICAgICAgICAgICAgKytwdXNoDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmICggbmV3IERhdGUoc2lnbi5kYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoLi4ubG9jYWxlKSA9PT0gZGF0ZSApDQogICAgICAgICAgICAgICAgICAgICsrcHVzaA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgIH0pDQoNCiAgICAgICAgbGlzdC5wdXNoKHB1c2gpDQogICAgfSkNCg0KICAgIHJldHVybiBsaXN0DQp9DQoNCmZ1bmN0aW9uIGdldFNpZ25VcHMgKCkgew0KICAgIHZhciBsaXN0ID0gW10NCg0KICAgIHRoaXMuZGF5cy5mb3JFYWNoKGRhdGUgPT4gew0KICAgICAgICBsZXQgcHVzaCA9IDANCg0KICAgICAgICB0aGlzLmRhdGEuc2lnblVwcy5mb3JFYWNoKHNpZ24gPT4gew0KICAgICAgICAgICAgaWYgKCB0eXBlb2YgZGF0ZSA9PT0gJ251bWJlcicgKSB7DQogICAgICAgICAgICAgICAgaWYgKCBuZXcgRGF0ZShzaWduLnNpZ25VcCkuZ2V0RGF0ZSgpID09PSBkYXRlICkgew0KDQogICAgICAgICAgICAgICAgICAgICsrcHVzaA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKCBuZXcgRGF0ZShzaWduLnNpZ25VcCkudG9Mb2NhbGVEYXRlU3RyaW5nKC4uLmxvY2FsZSkgPT09IGRhdGUgKQ0KICAgICAgICAgICAgICAgICAgICArK3B1c2gNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSkNCg0KICAgICAgICBsaXN0LnB1c2gocHVzaCkNCiAgICB9KQ0KDQogICAgcmV0dXJuIGxpc3QNCn0NCg0KZnVuY3Rpb24gc3RhcnQgKCkgew0KICAgIHRoaXMuJHdhdGNoKCdkYXRhJywgKHZhbHVlKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHZhbHVlKQ0KICAgICAgICB0aGlzLmRheXMgPSBnZXREYXlzKHRoaXMucGVyaW9kKQ0KICAgICAgICB0aGlzLnVwZGF0ZSgpDQogICAgfSkNCg0KICAgIA0KfQ0K"},{"version":3,"sources":["Daily.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"Daily.vue","sourceRoot":"source/components/Activity","sourcesContent":["<template lang='pug'>\r\n\r\n    figure( class='highcharts-figure' )\r\n        div#activity-3\r\n\r\n</template>\r\n\r\n<script>\r\nconst locale = ['ru', {\r\n    month: 'short',\r\n    day: 'numeric'\r\n}]\r\n\r\nexport default {\r\n    props: ['data', 'period'],\r\n    methods: { update, getSignIns, getSignUps },\r\n    mounted: start,\r\n    data: function () {\r\n        return {\r\n            days: []\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDays (period) {\r\n    var list = []\r\n    var begin = new Date(period[0])\r\n    var end = new Date(period[1])\r\n    var withMonth = begin.getMonth() != end.getMonth()\r\n    var range = 0|(end-begin)/1000/60/60/24\r\n\r\n    for ( let i = 0; i <= range; ++i ) {\r\n        if ( withMonth === false )\r\n            list.push( new Date(begin - 0 + 1000*60*60*24*i).getDate() )\r\n        else list.push( new Date(begin - 0 + 1000*60*60*24*i).toLocaleDateString(...locale) )\r\n    }\r\n    \r\n    // list.sort((a, b) => a - b)\r\n    return list\r\n}\r\n\r\nfunction update () {\r\n    Highcharts.chart('activity-3', {\r\n        chart: { type: 'areaspline' },\r\n        title: { text: '' },\r\n        exporting: { buttons: { contextButton: { enabled: false } } },\r\n        legend: {\r\n            layout: 'vertical',\r\n            align: 'left',\r\n            verticalAlign: 'top',\r\n            x: 60,\r\n            y: 50,\r\n            floating: true,\r\n            borderWidth: 1,\r\n            backgroundColor:\r\n                Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF'\r\n        },\r\n        xAxis: {\r\n            categories: this.days // Days\r\n        },\r\n        yAxis: { title: { text: '' } },\r\n        tooltip: {\r\n            shared: true\r\n        },\r\n        credits: {\r\n            enabled: false\r\n        },\r\n        plotOptions: {\r\n            areaspline: {\r\n                fillOpacity: 0.5\r\n            }\r\n        },\r\n        series: [\r\n            {\r\n                name: 'Авторизации',\r\n                data: this.getSignIns()\r\n            },\r\n\r\n            {\r\n                name: 'Регистрации',\r\n                data: this.getSignUps()\r\n            },\r\n        ]\r\n    })\r\n}\r\n\r\nfunction getSignIns () {\r\n    var list = []\r\n    console.log(this.days)\r\n\r\n    this.days.forEach(date => {\r\n        let push = 0\r\n\r\n        this.data.signIns.forEach(sign => {\r\n            console.log(date, new Date(sign.date).getDate())\r\n\r\n            if ( typeof date === 'number' ) {\r\n                if ( new Date(sign.date).getDate() === date )\r\n                    ++push\r\n            }\r\n\r\n            else {\r\n                if ( new Date(sign.date).toLocaleDateString(...locale) === date )\r\n                    ++push\r\n            }\r\n            \r\n        })\r\n\r\n        list.push(push)\r\n    })\r\n\r\n    return list\r\n}\r\n\r\nfunction getSignUps () {\r\n    var list = []\r\n\r\n    this.days.forEach(date => {\r\n        let push = 0\r\n\r\n        this.data.signUps.forEach(sign => {\r\n            if ( typeof date === 'number' ) {\r\n                if ( new Date(sign.signUp).getDate() === date ) {\r\n\r\n                    ++push\r\n                }\r\n            }\r\n\r\n            else {\r\n                if ( new Date(sign.signUp).toLocaleDateString(...locale) === date )\r\n                    ++push\r\n            }\r\n        })\r\n\r\n        list.push(push)\r\n    })\r\n\r\n    return list\r\n}\r\n\r\nfunction start () {\r\n    this.$watch('data', (value) => {\r\n        console.log(value)\r\n        this.days = getDays(this.period)\r\n        this.update()\r\n    })\r\n\r\n    \r\n}\r\n</script>"]}]}