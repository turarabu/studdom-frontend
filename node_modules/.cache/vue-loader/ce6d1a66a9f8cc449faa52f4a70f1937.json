{"remainingRequest":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Reports\\DownloadReport.vue?vue&type=style&index=0&lang=stylus&","dependencies":[{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Reports\\DownloadReport.vue","mtime":1577199531922},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KQGltcG9ydCAnfnNyYy9zdHlsZS9wYWxldHRlJw0KDQouZG93bmxvYWQtcmVwb3J0DQoNCiAgICAuYm9sZC10ZXh0DQogICAgICAgIGZvbnQtc2l6ZSAxOHB4DQogICAgICAgIGZvbnQtd2VpZ2h0IDUwMA0KICAgICAgICBtYXJnaW4gNHB4IDANCg0KICAgIC5kYXRlcGlja2VyDQogICAgICAgIGJvcmRlciAxcHggc29saWQgJGxpZ2h0LWdyYXkNCiAgICAgICAgYm9yZGVyLXJhZGl1cyAzcHgNCiAgICAgICAgZm9udC1zaXplIDE4cHgNCiAgICAgICAgcGFkZGluZyA2cHggMTJweA0KICAgICAgICBtYXJnaW4tcmlnaHQgOHB4DQoNCiAgICAucmVjb3Jkcy10YWJsZQ0KICAgICAgICBib3JkZXIgMXB4IHNvbGlkICRsaWdodC1ncmF5DQogICAgICAgIGJvcmRlci1yYWRpdXMgNXB4DQogICAgICAgIGJvcmRlci1jb2xsYXBzZSBjb2xsYXBzZQ0KICAgICAgICBtYXJnaW4gMjRweCAwDQogICAgICAgIHdpZHRoIDEwMCUNCg0KICAgICAgICAuaGVhZCAuZGF0YQ0KICAgICAgICAgICAgYm9yZGVyLWJvdHRvbSAxcHggc29saWQgJGxpZ2h0LWdyYXkNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0IDUwMA0KICAgICAgICAgICAgcGFkZGluZyAxMnB4DQoNCiAgICAgICAgLmRhdGENCiAgICAgICAgICAgIGZvbnQtc2l6ZSAxOHB4DQogICAgICAgICAgICBwYWRkaW5nIDhweCAxMnB4DQogICAgICAgICAgICB0ZXh0LWFsaWduIGxlZnQNCiAgICAgICAgICAgICY6bGFzdC1jaGlsZA0KICAgICAgICAgICAgICAgIHRleHQtYWxpZ24gcmlnaHQNCg0KICAgICAgICAuYm9keSAucm93DQogICAgICAgICAgICBjdXJzb3IgcG9pbnRlcg0KICAgICAgICAgICAgJjpob3Zlcg0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQgbGlnaHRlbigkbGlnaHQtZ3JheSwgMjUpDQogICAgICAgICAgICAmLmFjdGl2ZQ0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQgbGlnaHRlbigkbGlnaHQtZ3JheSwgMjApDQoNCg=="},{"version":3,"sources":["DownloadReport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"DownloadReport.vue","sourceRoot":"source/components/Reports","sourcesContent":["<template lang='pug'>\r\n\r\n    div( class='download-report' )\r\n        p( class='bold-text' ) Пероид отчётности\r\n        div( class='period-div' )\r\n            input( class='datepicker' type='date' placeholder='С' )\r\n            input( class='datepicker' type='date' placeholder='По' )\r\n\r\n        table( class='records-table' )\r\n            thead( class='head' )\r\n                tr( class='row' )\r\n                    th( class='data' ) Номер отчёта\r\n                    th( class='data' ) Пользователь\r\n                    th( class='data' ) Дата\r\n                    th( class='data' ) Вид отчёта\r\n                    th( class='data' ) Субъект отчёта\r\n                    th( class='data' ) Периоды\r\n\r\n            tbody( class='body' )\r\n                tr( v-for='(record, index) in records' class='row' :class='{ active: selected === record.id }' :key='record._id' @click='selected = record.id' )\r\n                    td( class='data' ) {{ index+1 }}\r\n                    td( class='data' ) {{ record.userName }}\r\n                    td( class='data' ) {{ getDate(record.date) }}\r\n                    td( class='data' ) {{ getType(record.recordType) }}\r\n                    td( class='data' ) {{ record.dormitory }}\r\n                    td( class='data' ) С {{ getPeriod(record.from) }}\r\n                        br\r\n                        span По {{ getPeriod(record.to) }}\r\n\r\n        Button( v-if='selected !== false' icon='upload' title='Скачать формате PDF' background='green' icon-top='3px' @click.native='download' )\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport Button from ':src/components/UI/Button.vue'\r\nimport OptionsList from ':src/components/UI/OptionsList.vue'\r\n\r\nexport default {\r\n    components: { Button },\r\n    methods: { download, getDate, getType, getPeriod },\r\n    mounted: start,\r\n    data: function () {\r\n        return {\r\n            active: 0,\r\n            selected: false,\r\n            records: []\r\n        }\r\n    }\r\n}\r\n\r\nfunction download () {\r\n    window.open('http://localhost:8000/record/download?id=' + this.selected, '_blank')\r\n}\r\n\r\nfunction getDate (date) {\r\n    return new Date(date).toLocaleString('ru', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: 'numeric',\r\n        minute: 'numeric'\r\n    })\r\n}\r\n\r\nfunction getType (type) {\r\n    var types = {\r\n        'sign-in': 'Статистика по авторизациям',\r\n        'sign-up': 'Статистика по регистрациям',\r\n        'consolidate': 'Сводный отчет по общежитиям',\r\n        'turnstiles': 'Отчет по терминалам'\r\n    }\r\n\r\n    return types[type]\r\n}\r\n\r\nfunction getPeriod (from) {\r\n    return new Date(from).toLocaleString('ru', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n    })\r\n}\r\n\r\nasync function start () {\r\n    let { data } = await this.api.get('record/list')\r\n    this.records = data\r\n}\r\n\r\n</script>\r\n\r\n<style lang='stylus'>\r\n@import '~src/style/palette'\r\n\r\n.download-report\r\n\r\n    .bold-text\r\n        font-size 18px\r\n        font-weight 500\r\n        margin 4px 0\r\n\r\n    .datepicker\r\n        border 1px solid $light-gray\r\n        border-radius 3px\r\n        font-size 18px\r\n        padding 6px 12px\r\n        margin-right 8px\r\n\r\n    .records-table\r\n        border 1px solid $light-gray\r\n        border-radius 5px\r\n        border-collapse collapse\r\n        margin 24px 0\r\n        width 100%\r\n\r\n        .head .data\r\n            border-bottom 1px solid $light-gray\r\n            font-weight 500\r\n            padding 12px\r\n\r\n        .data\r\n            font-size 18px\r\n            padding 8px 12px\r\n            text-align left\r\n            &:last-child\r\n                text-align right\r\n\r\n        .body .row\r\n            cursor pointer\r\n            &:hover\r\n                background lighten($light-gray, 25)\r\n            &.active\r\n                background lighten($light-gray, 20)\r\n\r\n</style>"]}]}