{"remainingRequest":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\App.vue","mtime":1577197201107},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBdXRoUGFnZSBmcm9tICc6c3JjL2NvbXBvbmVudHMvQXV0aC52dWUnCmltcG9ydCBEYXNoYm9hcmQgZnJvbSAnOnNyYy9jb21wb25lbnRzL0Rhc2hib2FyZC52dWUnCgppbXBvcnQgTW9kYWxDcmVhdGVVc2VyIGZyb20gJzpzcmMvY29tcG9uZW50cy9Nb2RhbC9DcmVhdGVVc2VyLnZ1ZScKaW1wb3J0IE1vZGFsQ3JlYXRlRG9ybWl0b3J5IGZyb20gJzpzcmMvY29tcG9uZW50cy9Nb2RhbC9DcmVhdGVEb3JtaXRvcnkudnVlJwoKaW1wb3J0IE1vZGFsRWRpdERvcm1pdG9yeSBmcm9tICc6c3JjL2NvbXBvbmVudHMvTW9kYWwvRWRpdERvcm1pdG9yeS52dWUnCmltcG9ydCBNb2RhbEVkaXRVc2VyIGZyb20gJzpzcmMvY29tcG9uZW50cy9Nb2RhbC9FZGl0VXNlci52dWUnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOiB7IEF1dGhQYWdlLCBEYXNoYm9hcmQsIE1vZGFsQ3JlYXRlVXNlciwgTW9kYWxDcmVhdGVEb3JtaXRvcnksIE1vZGFsRWRpdERvcm1pdG9yeSwgTW9kYWxFZGl0VXNlciB9LAogICAgY29tcHV0ZWQ6IHsgdXNlciwgbW9kYWxzIH0sCiAgICBtZXRob2RzOiB7IGxvYWREYXRhLCBjaGVja0Nsb3NlIH0sCiAgICBtb3VudGVkOiBzdGFydAp9CgpmdW5jdGlvbiB1c2VyICgpIHsKICAgIGNvbnNvbGUubG9nKCcxMjMnKQogICAgY29uc29sZS5sb2codGhpcy4kc3RvcmUuc3RhdGUudXNlcikKICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyCn0KCmZ1bmN0aW9uIG1vZGFscyAoKSB7CiAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubW9kYWxzCn0KCmFzeW5jIGZ1bmN0aW9uIGxvYWREYXRhICgpIHsKICAgIGlmICgnY2l0aWVzJykgewogICAgICAgIGxldCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuYXBpLmdldCgnY2l0eS9saXN0JykKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NpdGllcy1zZXQnLCBkYXRhKQogICAgfQoKICAgIGlmICgnZG9ybWl0b3JpZXMnKSB7CiAgICAgICAgbGV0IHsgZGF0YSB9ID0gYXdhaXQgdGhpcy5hcGkuZ2V0KCdkb3JtaXRvcnkvbGlzdCcpCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkb3JtaXRvcmllcy1zZXQnLCBkYXRhKQogICAgfQoKICAgIHJldHVybiB0cnVlCn0KCmZ1bmN0aW9uIGNoZWNrQ2xvc2UgKGV2ZW50KSB7CiAgICBpZiAoIGV2ZW50LnRhcmdldC5pZCA9PT0gJ21vZGFscy1kaXYnICkKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2Nsb3NlTW9kYWwnLCB0aGlzLm1vZGFscy5sZW5ndGggLSAxKQp9Cgphc3luYyBmdW5jdGlvbiBzdGFydCAoKSB7CiAgICBpZiAoJ3VzZXInKSB7CiAgICAgICAgbGV0IHsgZGF0YSB9ID0gYXdhaXQgdGhpcy5hcGkuZ2V0KCd1c2VyL3Byb2ZpbGUnKQoKICAgICAgICBpZiAoIGRhdGEubG9naW4gKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZERhdGEoKQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VzZXItc2V0JywgZGF0YSkKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogICAgICAgIH0KCiAgICAgICAgZWxzZSB0aGlzLiRzdG9yZS5jb21taXQoJ3VzZXItcXVpdCcpCiAgICB9Cn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"App.vue","sourceRoot":"source","sourcesContent":["<template lang=\"pug\">\n    body#app\n        AuthPage( v-if='user.status === false' )\n        Dashboard( v-else )\n\n        div#modals-div( v-if='modals.length > 0' @click='checkClose' )\n            div( v-for='(modal, id) in modals' :key='id' )\n                ModalCreateUser( v-if='modal.name == \"createUser\"' v-bind='{ id, data: modal.data }' )\n                ModalCreateDormitory( v-if='modal.name == \"createDormitory\"' v-bind='{ id, data: modal.data }' )\n                \n                ModalEditDormitory( v-if='modal.name == \"editDormitory\"' v-bind='{ id, data: modal.data }' )\n                ModalEditUser( v-if='modal.name == \"editUser\"' v-bind='{ id, data: modal.data }' )\n\n\n</template>\n\n<script>\nimport AuthPage from ':src/components/Auth.vue'\nimport Dashboard from ':src/components/Dashboard.vue'\n\nimport ModalCreateUser from ':src/components/Modal/CreateUser.vue'\nimport ModalCreateDormitory from ':src/components/Modal/CreateDormitory.vue'\n\nimport ModalEditDormitory from ':src/components/Modal/EditDormitory.vue'\nimport ModalEditUser from ':src/components/Modal/EditUser.vue'\n\nexport default {\n    components: { AuthPage, Dashboard, ModalCreateUser, ModalCreateDormitory, ModalEditDormitory, ModalEditUser },\n    computed: { user, modals },\n    methods: { loadData, checkClose },\n    mounted: start\n}\n\nfunction user () {\n    console.log('123')\n    console.log(this.$store.state.user)\n    return this.$store.state.user\n}\n\nfunction modals () {\n    return this.$store.state.modals\n}\n\nasync function loadData () {\n    if ('cities') {\n        let { data } = await this.api.get('city/list')\n        this.$store.commit('cities-set', data)\n    }\n\n    if ('dormitories') {\n        let { data } = await this.api.get('dormitory/list')\n        this.$store.commit('dormitories-set', data)\n    }\n\n    return true\n}\n\nfunction checkClose (event) {\n    if ( event.target.id === 'modals-div' )\n        this.$store.commit('closeModal', this.modals.length - 1)\n}\n\nasync function start () {\n    if ('user') {\n        let { data } = await this.api.get('user/profile')\n\n        if ( data.login ) {\n            await this.loadData()\n            this.$store.commit('user-set', data)\n            this.$router.push('/')\n        }\n\n        else this.$store.commit('user-quit')\n    }\n}\n</script>\n\n<style lang=\"stylus\">\n@import '~src/style/fonts'\n@import '~src/style/base'\n@import '~src/style/palette'\n\n#modals-div\n    align-items flex-start\n    background RGBA(50, 50, 50, .5)\n    display flex\n    justify-content center\n    overflow auto\n    padding 62px 0 32px 0\n    position fixed\n    top 0\n    bottom 0\n    left 0\n    width 100%\n    z-index 100\n\n    .modal\n        background $white\n        border-radius 5px\n        box-shadow 0 0 15px RGBA(50, 50, 50, .5)\n\n        .modal-title\n            font-size 20px\n            font-weight 500\n</style>"]}]}