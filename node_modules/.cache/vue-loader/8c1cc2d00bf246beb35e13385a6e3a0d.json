{"remainingRequest":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Modal\\EditUser.vue?vue&type=style&index=0&lang=stylus&","dependencies":[{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\source\\components\\Modal\\EditUser.vue","mtime":1576385377287},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Turar\\Projects\\Work\\studdom\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpAaW1wb3J0ICd+c3JjL3N0eWxlL3BhbGV0dGUnDQoNCiNjcmVhdGUtdXNlcg0KICAgIHBhZGRpbmcgMjRweA0KDQogICAgLmNyZWF0ZS1pbnB1dA0KICAgICAgICBkaXNwbGF5IGJsb2NrDQogICAgICAgIG1hcmdpbiAxMnB4IDANCg0KICAgIC5idXR0b25zLWRpdg0KICAgICAgICBib3JkZXItdG9wIDFweCBzb2xpZCBsaWdodGVuKCRsaWdodC1ncmF5LCAxNSkNCiAgICAgICAgZGlzcGxheSBmbGV4DQogICAgICAgIGp1c3RpZnktY29udGVudCBzcGFjZS1iZXR3ZWVuDQogICAgICAgIG1hcmdpbi10b3AgOHB4DQogICAgICAgIHBhZGRpbmctdG9wIDE2cHgNCg0KICAgICNmb3JtDQogICAgICAgIGFsaWduLWl0ZW1zIGZsZXgtc3RhcnQNCiAgICAgICAgZGlzcGxheSBmbGV4DQogICAgICAgIGp1c3RpZnktY29udGVudCBzcGFjZS1iZXR3ZWVuDQogICAgICAgIG1hcmdpbi10b3AgMThweA0KDQogICAgICAgIC51c2VyLWluZm8tZGl2DQogICAgICAgICAgICBtYXJnaW4tbGVmdCAxNnB4DQoNCiAgICAuYXZhdGFyLWRpdg0KICAgICAgICBhbGlnbi1pdGVtcyBjZW50ZXINCiAgICAgICAgZGlzcGxheSBmbGV4DQogICAgICAgIGp1c3RpZnktY29udGVudCBjZW50ZXINCiAgICAgICAgbWFyZ2luLWJvdHRvbSA4cHgNCg0KICAgICAgICAuYXZhdGFyDQogICAgICAgICAgICBtYXgtaGVpZ2h0IDQwMHB4DQogICAgICAgICAgICBtYXgtd2lkdGggMTAwJQ0KDQo="},{"version":3,"sources":["EditUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"EditUser.vue","sourceRoot":"source/components/Modal","sourcesContent":["<template lang='pug'>\r\n\r\n    div#create-user( class='modal' )\r\n        h3( class='modal-title' ) Редактирование пользователя\r\n\r\n        form#form( class='blocks-div' @submit='save' )\r\n            div( class='inputs-div' )\r\n                InputText( class='create-input' placeholder='Фамилия' v-model='user.lastName' )\r\n                InputText( class='create-input' placeholder='Имя' v-model='user.firstName' )\r\n                InputText( class='create-input' placeholder='Отчество' v-model='user.patronymic' )\r\n                InputText( class='create-input' placeholder='ИИН' pattern='[0-9]{1,12}' v-model='user.iin' )\r\n                InputText( class='create-input' placeholder='Телефон' pattern='((\\\\+|7|8)+([0-9]{0,}))' v-model='user.phone' )\r\n                InputText( class='create-input' placeholder='Должность' v-model='user.position' )\r\n\r\n                Select( class='create-input' placeholder='Уровень доступа' :searchable='false' :list='userTypes' v-model='user.type' )\r\n\r\n            div( class='user-info-div' )\r\n                div( class='avatar-div' )\r\n                    img( class='avatar' :src='getAvatar(user.avatar)' )\r\n\r\n                InputFile( class='create-input' accept='image/*' v-model='user.newAvatar' )\r\n\r\n                InputText( class='create-input' disabled placeholder='Логин' v-model='user.login' )\r\n                InputText( class='create-input' type='password' placeholder='Пароль' v-model='user.password' )\r\n                InputText( class='create-input' type='password' placeholder='Повторите пароль' v-model='user.confirmPassword' )\r\n            \r\n\r\n        div( class='buttons-div' )\r\n            Button( title='Отменить' background='red' icon-top='2px' @click.native='cancel' )\r\n            Button( icon='create' title='Сохранить' background='green' icon-top='2px' @click.native='save' )\r\n                \r\n\r\n</template>\r\n\r\n<script>\r\nimport Button from ':src/components/UI/Button.vue'\r\n\r\nimport InputText from ':src/components/UI/Input/Text.vue'\r\nimport InputFile from ':src/components/UI/Input/File.vue'\r\nimport Select from ':src/components/UI/Input/Select.vue'\r\n\r\nexport default {\r\n    props: ['id', 'data'],\r\n    components: { InputText, InputFile, Select, Button },\r\n    computed: { cities },\r\n    methods: { getAvatar, save, cancel },\r\n    data: function () {\r\n        return {\r\n            userTypes: {\r\n                admin: 'Администратор',\r\n                manager: 'Управляющий'\r\n            },\r\n\r\n            user: this.data\r\n        }\r\n    }\r\n}\r\n\r\nfunction cities () {\r\n    var list = {}\r\n\r\n    this.$store.state.cities.forEach(city => {\r\n        list[city.code] = city.name\r\n    })\r\n\r\n    return list\r\n}\r\n\r\nfunction getAvatar (avatar) {\r\n    if ( avatar == undefined || avatar == false )\r\n        return '/images/avatar.png'\r\n    \r\n    else return 'data:image/png;base64, ' + avatar\r\n}\r\n\r\nasync function save (event) {\r\n    if ( event && event.preventDefault )\r\n        event.preventDefault()\r\n\r\n    if ( this.password !== this.confirmPassword )\r\n        return\r\n\r\n    var post = JSON.parse( JSON.stringify(this.user) )\r\n\r\n    if ( this.newAvatar !== undefined )\r\n        post.avatar = this.newAvatar\r\n\r\n    let empty = Object.keys(this.user).find(key => {\r\n        return false\r\n        // if ( key === 'avatar' )\r\n        //     return false\r\n\r\n        // else return this.user[key] == false\r\n    })\r\n    \r\n    if ( empty === undefined ) {\r\n        let { data, success } = await this.api.post('user/update', post)\r\n\r\n        if ( success === true ) {\r\n            this.$store.commit('users-list-set', data)\r\n            return this.$store.commit(\"closeModal\", this.id)\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction cancel () {\r\n    return this.$store.commit(\"closeModal\", this.id)\r\n}\r\n</script>\r\n\r\n<style lang='stylus'>\r\n@import '~src/style/palette'\r\n\r\n#create-user\r\n    padding 24px\r\n\r\n    .create-input\r\n        display block\r\n        margin 12px 0\r\n\r\n    .buttons-div\r\n        border-top 1px solid lighten($light-gray, 15)\r\n        display flex\r\n        justify-content space-between\r\n        margin-top 8px\r\n        padding-top 16px\r\n\r\n    #form\r\n        align-items flex-start\r\n        display flex\r\n        justify-content space-between\r\n        margin-top 18px\r\n\r\n        .user-info-div\r\n            margin-left 16px\r\n\r\n    .avatar-div\r\n        align-items center\r\n        display flex\r\n        justify-content center\r\n        margin-bottom 8px\r\n\r\n        .avatar\r\n            max-height 400px\r\n            max-width 100%\r\n\r\n</style>"]}]}